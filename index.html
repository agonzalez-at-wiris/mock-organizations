<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LearningLemur ‚Äî Organizations (Prototype)</title>
  <style>
    :root{
      --teal:#0f7c82;
      --teal-700:#0b5c60;
      --mint:#dff1ee;
      --bg:#e8f6f3;
      --card:#ffffff;
      --ink:#2e3a3b;
      --muted:#6e7f80;
      --accent:#17a2a4;
      --warning:#efb036;
      --danger:#e35d6a;
      --ok:#36b37e;
      --shadow:0 8px 20px rgba(0,0,0,.08);
      --radius:16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      color:var(--ink);
      background:var(--bg);
    }
    header{
      height:64px;
      background:var(--teal);
      color:white;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:0 20px 0 16px;
      position:sticky; top:0; z-index:3;
      box-shadow: var(--shadow);
    }
    header .brand{
      display:flex; align-items:center; gap:12px;
      font-weight:700; letter-spacing:.2px;
    }
    header .brand .logo{
      width:36px; height:36px; border-radius:50%;
      background:linear-gradient(145deg,#fff, #e9fffa);
      display:grid; place-items:center;
      color:var(--teal);
      font-weight:900;
    }
    header .actions{
      display:flex; align-items:center; gap:12px;
    }
    .btn{
      border:none; padding:10px 14px; border-radius:999px;
      background:#fff; color:var(--teal-700); cursor:pointer; font-weight:600;
      box-shadow: var(--shadow);
    }
    .btn.primary{ background:#fff; color:var(--teal-700) }
    .btn.ghost{ background:transparent; color:#fff; border:1px solid rgba(255,255,255,.35) }
    .avatar{
      width:34px; height:34px; border-radius:50%; background:#fff2;
      display:grid; place-items:center; font-weight:700; border:2px solid #fff3; color:#fff;
    }

    .layout{
      display:grid;
      grid-template-columns: 220px 1fr;
      min-height: calc(100vh - 64px);
    }
    nav{
      background: linear-gradient(180deg, #0f7c82, #0a686d);
      color:#daf5f4;
      padding:20px 12px;
    }
    .nav-group{ margin-top:12px }
    .nav-item{
      display:flex; align-items:center; gap:12px;
      padding:12px 14px; margin:8px 4px;
      background:rgba(255,255,255,.07);
      border-radius:12px; cursor:pointer; user-select:none;
      transition: transform .05s ease;
    }
    .nav-item:hover{ transform: translateY(-1px) }
    .nav-item.active{ background:#fff; color:var(--teal-700); font-weight:700 }
    .nav-item .icon{
      width:22px; height:22px; display:inline-grid; place-items:center;
      background:#fff2; border-radius:6px; color:#fff;
    }
    .nav-item.active .icon{ background:var(--mint); color:var(--teal) }

    main{ padding:24px; }
    .crumbs{ color:var(--muted); font-size:14px; margin-bottom:12px }
    h1{ margin:6px 0 16px; font-size:28px }
    .toolbar{
      display:flex; gap:10px; flex-wrap:wrap; margin: 8px 0 18px;
    }

    .grid{
      display:grid; gap:16px;
    }
    .grid.cols-3{ grid-template-columns: repeat(3, minmax(0,1fr));}
    .grid.cols-2{ grid-template-columns: repeat(2, minmax(0,1fr));}
    @media (max-width:1080px){ .grid.cols-3{ grid-template-columns: repeat(2,1fr);} }
    @media (max-width:760px){ .layout{ grid-template-columns: 1fr } nav{ position:sticky; top:64px; z-index:2 } .grid.cols-3,.grid.cols-2{ grid-template-columns: 1fr } }

    .card{
      background:var(--card); border-radius:var(--radius); padding:16px 16px;
      box-shadow: var(--shadow);
    }
    .card h3{ margin:0 0 8px }
    .kpi{
      display:flex; align-items:center; justify-content:space-between;
      padding:8px 4px; gap:8px;
    }
    .kpi .value{ font-size:28px; font-weight:800 }
    .kpi .delta{ font-weight:700 }
    .delta.up{ color: var(--ok) } .delta.down{ color: var(--danger) }
    .muted{ color:var(--muted) }

    table{ width:100%; border-collapse:collapse; font-size:14px }
    th, td{ padding:10px 8px; text-align:left; border-bottom:1px solid #eee }
    th{ color:var(--muted); font-weight:700; background:#fafafa }

    .badge{ display:inline-block; padding:4px 10px; border-radius:999px; font-size:12px; font-weight:700 }
    .badge.ok{ background:#e6f7ef; color:#177a52 }
    .badge.warn{ background:#fff4e2; color:#9c6a10 }
    .badge.danger{ background:#fee8ea; color:#a73e4b }
    .badge.muted{ background:#eef6f6; color:#4d6c6d }

    .switch{ position:relative; width:44px; height:26px; background:#dfeaea; border-radius:999px; cursor:pointer; display:inline-block; vertical-align:middle }
    .switch::after{ content:""; position:absolute; top:3px; left:3px; width:20px; height:20px; background:#fff; border-radius:50%; transition: all .2s ease; box-shadow:0 2px 6px rgba(0,0,0,.2) }
    .switch.on{ background:#bde5dc }
    .switch.on::after{ left:21px; background: #fff }
    .switch-label{ margin-left:8px; font-weight:600 }

    .pill-tabs{ display:flex; gap:8px; margin-bottom:14px; flex-wrap:wrap }
    .pill-tabs button{ border:none; padding:8px 12px; border-radius:999px; background:#f0f7f7; color:#275a5b; cursor:pointer; font-weight:700 }
    .pill-tabs button.active{ background:#0f7c82; color:#fff }

    .chart{
      width:100%; height:180px; background:linear-gradient(180deg,#f7fbfb,#fff);
      border-radius:12px; border:1px solid #eef3f4; display:grid; place-items:center;
    }
    .footer-note{ color:var(--muted); font-size:12px; text-align:right; margin-top:8px }
    .help{ font-size:12px; color:var(--muted) }

    /* simple dropdown */
    .dropdown{ position:relative; display:inline-block }
    .menu{ position:absolute; right:0; top:40px; min-width:220px; background:#fff; border-radius:12px; box-shadow:var(--shadow); display:none; padding:8px }
    .menu a{ display:block; padding:10px 12px; border-radius:10px; color:inherit; text-decoration:none }
    .menu a:hover{ background:#f5fbfb }
    .dropdown.open .menu{ display:block }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">LL</div>
      <div>LearningLemur</div>
    </div>
    <div class="actions">
      <button class="btn ghost" onclick="alert('This is a non-functional prototype.')">UPGRADE YOUR PLAN</button>
      <div class="dropdown">
        <button class="btn primary" onclick="toggleMenu(event)">Andrea (Admin)</button>
        <div class="menu">
          <a href="#" onclick="setLang('English')">Language: English</a>
          <a href="#" onclick="alert('Profile modal‚Ä¶')">Profile</a>
          <a href="#" onclick="alert('Log out‚Ä¶')">Log out</a>
        </div>
      </div>
    </div>
  </header>

  <div class="layout">
    <nav>
      <div class="nav-group">
        <div class="nav-item" data-section="dashboard" onclick="switchSection(event)">
          <div class="icon">üè´</div> <div>Org Dashboard</div>
        </div>
        <div class="nav-item" data-section="members" onclick="switchSection(event)">
          <div class="icon">üë•</div> <div>Members</div>
        </div>
        <div class="nav-item" data-section="licenses" onclick="switchSection(event)">
          <div class="icon">üé´</div> <div>Licenses</div>
        </div>
        <div class="nav-item" data-section="flags" onclick="switchSection(event)">
          <div class="icon">üîß</div> <div>Feature Flags</div>
        </div>
        <div class="nav-item" data-section="analytics" onclick="switchSection(event)">
          <div class="icon">üìà</div> <div>Analytics</div>
        </div>
        <div class="nav-item" data-section="settings" onclick="switchSection(event)">
          <div class="icon">‚öôÔ∏è</div> <div>Settings</div>
        </div>
      </div>
    </nav>

    <main>
      <div class="crumbs">Organizations / Wiris School</div>
      <h1 id="title">Org Dashboard</h1>
      <div id="section-dashboard" class="section">
        <div class="toolbar">
          <button class="btn" onclick="alert('Invite flow‚Ä¶')">+ Invite members</button>
          <button class="btn" onclick="alert('Create sub-org‚Ä¶')">+ New department</button>
          <button class="btn" onclick="alert('Bulk actions‚Ä¶')">Bulk actions</button>
        </div>

        <div class="grid cols-3">
          <div class="card">
            <div class="kpi">
              <div>
                <div class="value">184</div>
                <div class="muted">Active teachers</div>
              </div>
              <span class="delta up">+12%</span>
            </div>
          </div>
          <div class="card">
            <div class="kpi">
              <div>
                <div class="value">4,920</div>
                <div class="muted">Student seats</div>
              </div>
              <span class="badge ok">84% utilized</span>
            </div>
          </div>
          <div class="card">
            <div class="kpi">
              <div>
                <div class="value">80%</div>
                <div class="muted">AI questions share</div>
              </div>
              <span class="delta up">+5pp</span>
            </div>
          </div>
        </div>

        <div class="grid cols-2" style="margin-top:16px">
          <div class="card">
            <h3>Recent activity</h3>
            <table>
              <thead><tr><th>When</th><th>User</th><th>Action</th><th>Details</th></tr></thead>
              <tbody>
                <tr><td>Today</td><td>Pol R.</td><td>Created quiz</td><td>Algebra ‚Äì Radicals</td></tr>
                <tr><td>Yesterday</td><td>Guillem P.</td><td>Joined org</td><td>Invited by Andrea</td></tr>
                <tr><td>Yesterday</td><td>Carlota S.</td><td>Used AI</td><td>Generated 12 questions</td></tr>
                <tr><td>2 days ago</td><td>Andrea G.</td><td>Changed feature flags</td><td>Enabled Content Bank</td></tr>
              </tbody>
            </table>
          </div>
          <div class="card">
            <h3>Seats & usage</h3>
            <div class="chart" id="chart-usage"></div>
            <div class="footer-note">Mock data. For visualization only.</div>
          </div>
        </div>
      </div>

      <div id="section-members" class="section" style="display:none">
        <div class="pill-tabs">
          <button class="active" data-tab="teachers" onclick="switchTab(event,'members')">Teachers</button>
          <button data-tab="students" onclick="switchTab(event,'members')">Students</button>
          <button data-tab="admins" onclick="switchTab(event,'members')">Admins</button>
        </div>
        <div class="card">
          <table>
            <thead><tr><th>Name</th><th>Email</th><th>Role</th><th>Status</th><th>Last active</th><th style="width:120px">Actions</th></tr></thead>
            <tbody id="members-table">
              <!-- populated by JS -->
            </tbody>
          </table>
          <div class="help">Tip: Use bulk actions (top bar) to import users via CSV or domain claim.</div>
        </div>
      </div>

      <div id="section-licenses" class="section" style="display:none">
        <div class="grid cols-2">
          <div class="card">
            <h3>License status</h3>
            <table>
              <tbody>
                <tr><td>Plan</td><td><strong>LearningLemur Premium</strong></td></tr>
                <tr><td>Seats</td><td>500 teachers / 5,000 students</td></tr>
                <tr><td>Term</td><td>2025-09-01 ‚Üí 2026-08-31</td></tr>
                <tr><td>Status</td><td><span class="badge ok">Active</span></td></tr>
                <tr><td>Domain</td><td>wiris.com</td></tr>
              </tbody>
            </table>
            <div class="toolbar" style="margin-top:12px">
              <button class="btn" onclick="alert('Renew wizard‚Ä¶')">Renew</button>
              <button class="btn" onclick="alert('Change seat count‚Ä¶')">Adjust seats</button>
              <button class="btn" onclick="alert('Export entitlements‚Ä¶')">Export</button>
            </div>
          </div>
          <div class="card">
            <h3>Service control</h3>
            <p>Enable/disable service for the entire organization or specific domains.</p>
            <div style="display:flex; align-items:center; gap:18px; margin:8px 0">
              <div class="switch on" onclick="toggleSwitch(this)"></div><span class="switch-label">Service enabled</span>
            </div>
            <table style="margin-top:12px">
              <thead><tr><th>Scope</th><th>Value</th><th>Access</th></tr></thead>
              <tbody>
                <tr><td>Org</td><td>Wiris School</td><td><span class="badge ok">Enabled</span></td></tr>
                <tr><td>Domain</td><td>wiris.com</td><td><span class="badge ok">Enabled</span></td></tr>
                <tr><td>Domain</td><td>students.wiris.com</td><td><span class="badge warn">Restricted</span></td></tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="card" style="margin-top:16px">
          <h3>Entitled features</h3>
          <table>
            <thead><tr><th>Feature</th><th>Description</th><th>State</th><th>Notes</th></tr></thead>
            <tbody>
              <tr><td>Content Bank</td><td>Discover & reuse shared quizzes</td><td><span class="badge ok">Included</span></td><td></td></tr>
              <tr><td>AI Question Creation</td><td>Generate questions with AI</td><td><span class="badge ok">Included</span></td><td>Org-wide usage at 80%</td></tr>
              <tr><td>Advanced Analytics</td><td>Org dashboards & exports</td><td><span class="badge warn">Add-on</span></td><td>Trial ends in 14 days</td></tr>
              <tr><td>LTI Integration</td><td>Canvas & Google Classroom LTI</td><td><span class="badge ok">Included</span></td><td></td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <div id="section-flags" class="section" style="display:none">
        <div class="card">
          <h3>Feature flags (per-organization)</h3>
          <table>
            <thead><tr><th>Flag</th><th>Description</th><th>Default</th><th>Org override</th></tr></thead>
            <tbody>
              <tr><td>content_bank_enabled</td><td>Allow users to browse & import public content</td><td><span class="badge ok">On</span></td>
                <td><div class="switch on" onclick="toggleSwitch(this)"></div></td></tr>
              <tr><td>ai_authoring_beta</td><td>Enable experimental AI prompts & feedback</td><td><span class="badge warn">Beta</span></td>
                <td><div class="switch on" onclick="toggleSwitch(this)"></div></td></tr>
              <tr><td>student_reporting_v2</td><td>New student analytics module</td><td><span class="badge muted">Off</span></td>
                <td><div class="switch" onclick="toggleSwitch(this)"></div></td></tr>
              <tr><td>lti_canvas_roster_sync</td><td>Sync Canvas roster nightly</td><td><span class="badge ok">On</span></td>
                <td><div class="switch on" onclick="toggleSwitch(this)"></div></td></tr>
            </tbody>
          </table>
          <div class="toolbar" style="margin-top:10px">
            <button class="btn" onclick="alert('Save overrides‚Ä¶')">Save changes</button>
            <button class="btn" onclick="alert('Reset to defaults‚Ä¶')">Reset</button>
          </div>
        </div>
      </div>

      <div id="section-analytics" class="section" style="display:none">
        <div class="grid cols-3">
          <div class="card"><h3>Quizzes created</h3><div class="chart" id="chart-quizzes"></div></div>
          <div class="card"><h3>AI usage</h3><div class="chart" id="chart-ai"></div></div>
          <div class="card"><h3>Active users</h3><div class="chart" id="chart-active"></div></div>
        </div>
        <div class="card" style="margin-top:16px">
          <h3>Top departments</h3>
          <table>
            <thead><tr><th>Department</th><th>Teachers</th><th>Students</th><th>AI usage</th><th>Trend</th></tr></thead>
            <tbody>
              <tr><td>Mathematics</td><td>68</td><td>1,420</td><td>86%</td><td><span class="delta up">‚ñ≤</span></td></tr>
              <tr><td>Physics</td><td>22</td><td>560</td><td>74%</td><td><span class="delta up">‚ñ≤</span></td></tr>
              <tr><td>Chemistry</td><td>18</td><td>430</td><td>69%</td><td><span class="delta down">‚ñº</span></td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <div id="section-settings" class="section" style="display:none">
        <div class="grid cols-2">
          <div class="card">
            <h3>Organization profile</h3>
            <table>
              <tbody>
                <tr><td>Name</td><td><input value="Wiris School" style="padding:8px; width:100%"/></td></tr>
                <tr><td>Domains</td><td><input value="wiris.com, students.wiris.com" style="padding:8px; width:100%"/></td></tr>
                <tr><td>Primary contact</td><td><input value="andrea@wiris.com" style="padding:8px; width:100%"/></td></tr>
              </tbody>
            </table>
            <div class="toolbar" style="margin-top:12px">
              <button class="btn" onclick="alert('Saved!')">Save</button>
            </div>
          </div>
          <div class="card">
            <h3>Integrations</h3>
            <table>
              <thead><tr><th>App</th><th>Status</th><th>Details</th></tr></thead>
              <tbody>
                <tr><td>Google Classroom Add-on</td><td><span class="badge ok">Connected</span></td><td>Gradebook sync on</td></tr>
                <tr><td>Canvas LTI</td><td><span class="badge ok">Connected</span></td><td>Rollover: copy quizzes enabled</td></tr>
                <tr><td>Salesforce</td><td><span class="badge ok">Synced</span></td><td>Account: Wiris</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    const sections = ['dashboard','members','licenses','flags','analytics','settings'];
    function switchSection(e){
      const item = e.currentTarget;
      document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
      item.classList.add('active');
      const sec = item.dataset.section;
      sections.forEach(s => {
        document.getElementById('section-'+s).style.display = (s===sec?'block':'none');
      });
      document.getElementById('title').innerText = item.textContent.trim();
    }
    // default active
    document.querySelector('.nav-item[data-section="dashboard"]').classList.add('active');

    function toggleMenu(e){
      const dd = e.currentTarget.parentElement;
      dd.classList.toggle('open');
      document.addEventListener('click', (evt)=>{
        if(!dd.contains(evt.target)) dd.classList.remove('open')
      }, {once:true});
    }
    function toggleSwitch(el){
      el.classList.toggle('on');
    }
    function setLang(l){ alert('Language set to '+l) }

    // Members table mock data
    const members = [
      {name:'Andrea Gonzalez', email:'andrea@wiris.com', role:'Admin', status:'Active', last:'Today'},
      {name:'Carlota Serra', email:'carlota@wiris.com', role:'Teacher', status:'Active', last:'Today'},
      {name:'Pol Robert', email:'pol@wiris.com', role:'Teacher', status:'Active', last:'Yesterday'},
      {name:'Guillem Puig', email:'guillem@wiris.com', role:'Teacher', status:'Invited', last:'‚Äî'},
      {name:'Joan Rovira', email:'joan@wiris.com', role:'Teacher', status:'Suspended', last:'Aug 30'},
    ];
    function renderMembers(){
      const tbody = document.getElementById('members-table');
      tbody.innerHTML = members.map(m => `
        <tr>
          <td>${m.name}</td>
          <td>${m.email}</td>
          <td>${m.role}</td>
          <td>${badgeFor(m.status)}</td>
          <td>${m.last}</td>
          <td>
            <button class="btn" onclick="alert('Edit ${m.name}')">Edit</button>
          </td>
        </tr>
      `).join('');
    }
    function badgeFor(status){
      const map = { 'Active':'ok','Invited':'muted','Suspended':'danger' };
      return `<span class="badge ${map[status]||'muted'}">${status}</span>`
    }
    renderMembers();

    function switchTab(e, section){ 
      const container = document.querySelector('#section-'+section+' .pill-tabs');
      container.querySelectorAll('button').forEach(b=>b.classList.remove('active'));
      e.currentTarget.classList.add('active');
      alert('Tab switched: '+e.currentTarget.dataset.tab+' (mock)');
    }

    // Simple SVG charts
    function line(points, w=480, h=160, color='#0f7c82'){
      const max = Math.max(...points), min = Math.min(...points);
      const dx = w/(points.length-1);
      const path = points.map((p,i)=>`${i? 'L':'M'} ${i*dx.toFixed(2)} ${(h - ( (p-min)/(max-min||1) )*h).toFixed(2)}`).join(' ');
      return `<svg viewBox="0 0 ${w} ${h}" width="100%" height="100%">
        <defs>
          <linearGradient id="g" x1="0" x2="0" y1="0" y2="1">
            <stop offset="0%" stop-color="${color}" stop-opacity=".25"/>
            <stop offset="100%" stop-color="${color}" stop-opacity="0"/>
          </linearGradient>
        </defs>
        <path d="${path}" fill="none" stroke="${color}" stroke-width="3" />
        <path d="${path} L ${w} ${h} L 0 ${h} Z" fill="url(#g)" />
      </svg>`;
    }
    document.getElementById('chart-usage').innerHTML = line([30,40,38,45,55,52,65,70,69,75,78,84]);
    document.getElementById('chart-quizzes').innerHTML = line([120,140,160,180,170,210,240,260,300,320,350,380]);
    document.getElementById('chart-ai').innerHTML = line([55,58,60,62,64,66,69,72,75,78,80,82]);
    document.getElementById('chart-active').innerHTML = line([40,48,52,60,58,62,65,68,66,70,74,79]);
  </script>
</body>
</html>
